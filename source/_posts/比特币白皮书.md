# 比特币白皮书



## 摘要

Abstract. A purely peer-to-peer version of electronic cash would allow online payments to be sent directly from one party to another without going through a financial institution. Digital signatures provide part of the solution, but the main benefits are lost if a trusted third party is still required to prevent double-spending. We propose a solution to the double-spending problem using a peer-to-peer network. The network timestamps transactions by hashing them into an ongoing chain of hash-based proof-of-work, forming a record that cannot be changed without redoing the proof-of-work. The longest chain not only serves as proof of the sequence of events witnessed, but proof that it came from the largest pool of CPU power. As long as a majority of CPU power is controlled by nodes that are not cooperating to attack the network, they'll generate the longest chain and outpace attackers. The network itself requires minimal structure. Messages are broadcast on a best effort basis, and nodes can leave and rejoin the network at will, accepting the longest proof-of-work chain as proof of what happened while they were gone. 概要：⼀个纯粹的点对点版本的电⼦现⾦系统，将允许在线⽀付直接从⼀⽅发送到另⼀⽅，⽽⽆需通 过⾦融机构。数字签名虽然提供了部分解决⽅案，但，若是仍然需要被信任的第三⽅来防⽌双重⽀出 的话，那么电⼦⽀付的主要优势就被抵消了。我们提出⼀个⽅案，使⽤点对点⽹络去解决双重⽀出问 题。点对点⽹络将为每笔交易标记时间戳，⽅法是：把交易的散列数据录⼊⼀个不断延展的、以散列 为基础的⼯作证明链上，形成⼀个如⾮完全重做就不可能改变的记录。最⻓链，⼀⽅⾯⽤来证明已被 ⻅证的事件及其顺序，与此同时，也⽤来证明它来⾃于最⼤的 CPU 算⼒池。只要绝⼤多数 CPU 算⼒ 被良性节点控制 —— 即，它们不与那些尝试攻击⽹络的节点合作 —— 那么，良性节点将会⽣成最⻓ 链，并且在速度上超过攻击者。这个⽹络本身需要最⼩化的结构。信息将以最⼤努⼒为基本去传播， 节点来去⾃由；但，加⼊之时总是需要接受最⻓的⼯作证明链作为它们未参与期间所发⽣之⼀切的证 明。

解决的终极问题：建造一个去中心化的点对点电子现金

目标

像物理现金一样，一个人支付给另一个人，无需通过可信的第三方金融机构

短板

数字签名解决了“支付授权”问题，但没解决双重支付问题（同一笔数字资产被重复花费）

比特币解决方案

方法：构建一个点对点网络，所有节点共同维护一个公开的、不可篡改的账本

模型

时间戳和哈希链

交易打包成区块、区块包含时间戳、上一个区块的哈希值：改一个得改后面所有

工作量证明

节点必须完成计算密集工作，才可以将新区块添加到链上

最长链原则

最长的是真实、有效的账本；被更多算力认可

安全模型：基于算力的诚实多数假设

系统的安全性依赖于一个简单的经济假设——**大多数计算力（CPU power）由诚实的、不合作攻击网络的节点控制**

**攻击难度**：攻击者如果想要篡改交易（例如实现双花），他需要生成一条比诚实节点更长的替代链。但这要求他拥有超过全网50%的算力（即“51%攻击”）

网络特点: **极简、健壮、自由开放**

**结构简单**：网络无需复杂的组织结构或中心节点。

**广播机制**：信息（交易和区块）以“尽力而为”的方式在全网广播，不需要确保100%送达。

**自由进出**：节点可以随时加入或离开网络。重新加入时，只需接受当前最长的PoW链，就能同步到自己离开期间发生的所有交易，并与之保持一致。

总结

**去中心化**：用分布式网络替代中央权威。

**去信任化**：通过密码学和博弈论（而非对机构的信任）来确保安全。

**抗审查**：账本公开，交易不可逆转。

**健壮性**：网络无单点故障，能容忍节点随意进出。

## 特性1：交易区块

上一个交易信息 + 收款人的公钥  哈希一下，签上付款人的私钥

- ![image](https://api2.mubu.com/v3/document_image/10596643_f37fe1c2-5350-42ba-9ced-33ff2166cb5a.png?x-tos-process=image/resize,w_800)

## 特性2：时间戳服务器

为一组记录（区块）打上时间戳广播出去

- ![image](https://api2.mubu.com/v3/document_image/10596643_dc230dc2-c9b7-4a99-d826-851fe67f1cea.png?x-tos-process=image/resize,w_800)

## 特性3：     Proof of Work 工作量证明

核心思想：付出代价（消耗电力、算力）来获取“记账权”（把交易写入区块链中）

过程：记账节点（矿工）通过收集一批“未确认”的交易，再加上一个随机数（Nonce）输入哈希函数计算，得到小于特定的某一个目标值；矿工可以得到一些比特币 + 本次交易手续费

详细过程：矿工收集一段时间内广播的所有交易，把交易打包成一个区块（上一个区块的哈希值、本区块的哈希树根、一个当前的大概时间戳（前11个区块时间的中位数）、一个随机数）去破解

## 特性4：网络

1. 所有新的交易向所有节点⼴播；
2. 每个节点将新交易打包到⼀个区块；
3. 每个节点开始为此区块找⼀个具备难度的⼯作证明；
4. 当某个区块找到其⼯作证明，它就要将此区块⼴播给所有节点；
5. 众多其他节点当且只当以下条件满⾜才会接受这个区块：其中所有的交易都是有效的，且未被双重⽀付；
6. 众多节点向⽹络表示⾃⼰接受这个区块的⽅法是，在创建下⼀个区块的时候，把被接受区块的哈希当作新区块之前的哈希。

## 特性5：奖励incentive

记账节点如果成功记账，可以获取部分比特币+交易手续费

## 特性6：Merkle树

通过tranA-tranB、tranC-tranD 得到merkle根(固定长度32字节），可以节省磁盘空间，验证很久之前的交易

验证过程：tranB 以及hash(tranA)、hash(tranCD)；对tranB hash一下，在merkle路径上组合hash一下，得到最后的merkle根（待验证），对比是不是区块中的merkle根就可以知道

- ![image](https://api2.mubu.com/v3/document_image/10596643_cbfabfc7-b871-4a16-cf83-7c58233d089f.png?x-tos-process=image/resize,w_800)

- ![image](https://api2.mubu.com/v3/document_image/10596643_c3f49a0b-6dab-4b92-bede-50c7bbef8d07.png?x-tos-process=image/resize,w_800)

## 特性7：价值的组合和分割 combining and splitting value

交易记录包含多个输入和最多两个输出（收款方、找零方（发款方）

## 特性8：隐私 Privacy 

传统交易无关的公众无法得知交易细节

区块链中，交易对公众开放，但交易双方身份隐藏

- ![image](https://api2.mubu.com/v3/document_image/10596643_6718c07a-911a-4243-8495-0ef9107bbe0e.png?x-tos-process=image/resize,w_800)

## 特性9：计算 Calcluations

攻击者只能试图去篡改自己的交易（双花），无法

1. 凭空创造价值：coinbase交易（创世区块）节点在接受交易之前会去验证coinbase交易的输出金额，
2. 盗取他人比特币：比特币交易转账需要付款人的私钥签名

如果诚实节点找到下一个区块的概率 大于 攻击者找到下一区块的概率

攻击者攻击成功的概率，会指数下降

概念1： 数字签名如何解决“支付授权”

支付授权：例如银行核对你人脸、密码

身份验证：本人发起

意愿确认：所有者同意转账

数字货币交易流程图

- ![image](https://api2.mubu.com/v3/document_image/10596643_305746e3-8658-4cf1-b171-55523e617f83.png?x-tos-process=image/resize,w_526)